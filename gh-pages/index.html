<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>施設ケア入力フォーム - プロジェクト概要</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        .mermaid {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-12">
        <div class="container mx-auto px-4">
            <h1 class="text-4xl font-bold mb-4">施設ケア入力フォーム</h1>
            <p class="text-xl text-blue-100">介護施設向けコミュニケーションアプリ プロトタイプ</p>
            <div class="mt-6 flex gap-4 flex-wrap">
                <a href="https://facility-care-input-form.web.app" target="_blank"
                   class="bg-white text-blue-600 px-6 py-2 rounded-lg font-semibold hover:bg-blue-50 transition">
                    デモを見る
                </a>
                <a href="https://facility-care-input-form.web.app/input/meal?admin=true" target="_blank"
                   class="bg-yellow-500 text-black px-6 py-2 rounded-lg font-semibold hover:bg-yellow-400 transition">
                    管理者モード
                </a>
                <a href="https://github.com/yasushihonda-acg/facility-care-input-form" target="_blank"
                   class="bg-gray-700 text-white px-6 py-2 rounded-lg font-semibold hover:bg-gray-600 transition">
                    GitHub
                </a>
                <a href="architecture.html"
                   class="bg-indigo-500 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-400 transition">
                    アーキテクチャ図
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-12">
        <!-- Overview -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">プロジェクト概要</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-semibold text-blue-600 mb-3">目的</h3>
                    <p class="text-gray-600">
                        介護施設スタッフの食事記録入力と、ご家族への情報共有を実現するプロトタイプアプリケーション。
                        FAXベースのコミュニケーションをデジタル化し、リアルタイムな情報共有を可能にします。
                    </p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-semibold text-blue-600 mb-3">技術スタック</h3>
                    <div class="flex flex-wrap gap-2">
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">React</span>
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">TypeScript</span>
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Vite</span>
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">TailwindCSS</span>
                        <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm">Firebase</span>
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">Cloud Functions</span>
                        <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm">Google Sheets API</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">主要機能</h2>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500">
                    <div class="text-3xl mb-3">📋</div>
                    <h3 class="text-lg font-semibold mb-2">記録閲覧</h3>
                    <p class="text-gray-600 text-sm">スプレッドシートから自動同期されたケア記録をタブ形式で閲覧。検索・ソート機能付き。</p>
                    <span class="inline-block mt-3 bg-green-100 text-green-800 px-2 py-1 rounded text-xs">✅ 完了</span>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500">
                    <div class="text-3xl mb-3">🍽️</div>
                    <h3 class="text-lg font-semibold mb-2">食事入力フォーム</h3>
                    <p class="text-gray-600 text-sm">スタッフが食事記録を入力。写真アップロード、Google Chat通知に対応。</p>
                    <span class="inline-block mt-3 bg-green-100 text-green-800 px-2 py-1 rounded text-xs">✅ 完了</span>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500">
                    <div class="text-3xl mb-3">👨‍👩‍👧</div>
                    <h3 class="text-lg font-semibold mb-2">家族ビュー</h3>
                    <p class="text-gray-600 text-sm">ご家族向けのタイムライン表示。ケア指示（Plan）と実績（Result）を対比表示。</p>
                    <span class="inline-block mt-3 bg-green-100 text-green-800 px-2 py-1 rounded text-xs">✅ 完了</span>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500">
                    <div class="text-3xl mb-3">💬</div>
                    <h3 class="text-lg font-semibold mb-2">Google Chat通知</h3>
                    <p class="text-gray-600 text-sm">食事記録入力時にWebhookで自動通知。重要フラグ付きは別チャンネルにも通知。</p>
                    <span class="inline-block mt-3 bg-green-100 text-green-800 px-2 py-1 rounded text-xs">✅ 完了</span>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500">
                    <div class="text-3xl mb-3">📷</div>
                    <h3 class="text-lg font-semibold mb-2">写真アップロード</h3>
                    <p class="text-gray-600 text-sm">Google Driveへの画像保存。フォルダIDは管理者設定で変更可能。</p>
                    <span class="inline-block mt-3 bg-green-100 text-green-800 px-2 py-1 rounded text-xs">✅ 完了</span>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500">
                    <div class="text-3xl mb-3">🧪</div>
                    <h3 class="text-lg font-semibold mb-2">設定テスト機能</h3>
                    <p class="text-gray-600 text-sm">Webhook URLやDriveフォルダIDの設定を保存前にテスト。親切なエラーメッセージ付き。</p>
                    <span class="inline-block mt-3 bg-green-100 text-green-800 px-2 py-1 rounded text-xs">✅ 完了</span>
                </div>
            </div>
        </section>

        <!-- Data Flow Diagram -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">データフロー</h2>
            <div class="bg-white rounded-lg shadow-md p-6 overflow-x-auto">
                <div class="mermaid">
flowchart TB
    subgraph External["外部サービス"]
        SheetA["📊 Sheet A<br/>記録の結果（読み取り）"]
        SheetB["📊 Sheet B<br/>実績入力（書き込み）"]
        GDrive["📁 Google Drive<br/>写真保存"]
        GChat["💬 Google Chat<br/>Webhook通知"]
    end

    subgraph Backend["Cloud Functions"]
        Sync["syncPlanData<br/>15分毎同期"]
        Get["getPlanData<br/>データ取得"]
        Submit["submitMealRecord<br/>記録入力"]
        Upload["uploadCareImage<br/>画像アップロード"]
    end

    subgraph Storage["Firestore"]
        PlanData["plan_data/<br/>同期データ"]
        Settings["settings/<br/>設定"]
    end

    subgraph Frontend["React PWA"]
        Home["🏠 記録閲覧"]
        Input["📝 食事入力"]
        Family["👨‍👩‍👧 家族ビュー"]
    end

    SheetA -->|読み取り| Sync
    Sync -->|保存| PlanData
    PlanData -->|取得| Get
    Get -->|表示| Home
    Get -->|表示| Family

    Input -->|送信| Submit
    Submit -->|書き込み| SheetB
    Submit -->|通知| GChat

    Input -->|写真| Upload
    Upload -->|保存| GDrive

    Settings -.->|設定読込| Submit
    Settings -.->|設定読込| Upload
                </div>
            </div>
        </section>

        <!-- Phase Progress -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">開発進捗</h2>
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between mb-1">
                            <span class="font-medium">Phase 1-4: 基盤〜デモ版</span>
                            <span class="text-green-600">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="bg-green-500 h-3 rounded-full" style="width: 100%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-1">
                            <span class="font-medium">Phase 5.0-5.7: 食事入力〜設定改善</span>
                            <span class="text-green-600">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="bg-green-500 h-3 rounded-full" style="width: 100%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-1">
                            <span class="font-medium">Phase 5.8-5.10: 管理設定関連</span>
                            <span class="text-green-600">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="bg-green-500 h-3 rounded-full" style="width: 100%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-1">
                            <span class="font-medium">Phase 6.0: フッターナビ</span>
                            <span class="text-green-600">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="bg-green-500 h-3 rounded-full" style="width: 100%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-1">
                            <span class="font-medium">Phase 7.0-7.1: 家族ビュー・予実管理</span>
                            <span class="text-green-600">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="bg-green-500 h-3 rounded-full" style="width: 100%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Documents -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">ドキュメント</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/CURRENT_STATUS.md"
                   target="_blank"
                   class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition border-l-4 border-red-500">
                    <h3 class="font-semibold text-gray-800">📍 CURRENT_STATUS.md</h3>
                    <p class="text-sm text-gray-600">現在の進捗・次のタスク</p>
                </a>
                <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/HANDOVER.md"
                   target="_blank"
                   class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition border-l-4 border-purple-500">
                    <h3 class="font-semibold text-gray-800">🤝 HANDOVER.md</h3>
                    <p class="text-sm text-gray-600">引き継ぎドキュメント</p>
                </a>
                <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/ROADMAP.md"
                   target="_blank"
                   class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition border-l-4 border-blue-500">
                    <h3 class="font-semibold text-gray-800">🗺️ ROADMAP.md</h3>
                    <p class="text-sm text-gray-600">開発ロードマップ</p>
                </a>
                <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/ARCHITECTURE.md"
                   target="_blank"
                   class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition border-l-4 border-green-500">
                    <h3 class="font-semibold text-gray-800">🏗️ ARCHITECTURE.md</h3>
                    <p class="text-sm text-gray-600">システム設計</p>
                </a>
                <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/API_SPEC.md"
                   target="_blank"
                   class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition border-l-4 border-orange-500">
                    <h3 class="font-semibold text-gray-800">📡 API_SPEC.md</h3>
                    <p class="text-sm text-gray-600">API仕様書</p>
                </a>
                <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/FAMILY_UX_DESIGN.md"
                   target="_blank"
                   class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition border-l-4 border-pink-500">
                    <h3 class="font-semibold text-gray-800">👨‍👩‍👧 FAMILY_UX_DESIGN.md</h3>
                    <p class="text-sm text-gray-600">家族向けUX設計</p>
                </a>
                <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/SETTINGS_MODAL_UI_SPEC.md"
                   target="_blank"
                   class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition border-l-4 border-yellow-500">
                    <h3 class="font-semibold text-gray-800">⚙️ SETTINGS_MODAL_UI_SPEC.md</h3>
                    <p class="text-sm text-gray-600">設定モーダルUI仕様</p>
                </a>
                <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/BUSINESS_RULES.md"
                   target="_blank"
                   class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition border-l-4 border-red-500">
                    <h3 class="font-semibold text-gray-800">📜 BUSINESS_RULES.md</h3>
                    <p class="text-sm text-gray-600">業務ルール・データ仕様</p>
                </a>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400">
                © 2025 施設ケア入力フォーム プロジェクト
            </p>
            <p class="text-gray-500 text-sm mt-2">
                最終更新: 2025年12月15日
            </p>
        </div>
    </footer>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
</body>
</html>
