<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>施設ケア入力フォーム - プロジェクト概要</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        .mermaid {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-btn.active {
            border-bottom-color: #3b82f6;
            color: #3b82f6;
            background-color: #eff6ff;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-8">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl md:text-4xl font-bold mb-2">施設ケア入力フォーム</h1>
            <p class="text-lg text-blue-100 mb-6">介護施設向けコミュニケーションアプリ プロトタイプ</p>

            <!-- Quick Access Buttons -->
            <div class="bg-white/10 backdrop-blur rounded-xl p-4">
                <p class="text-sm text-blue-200 mb-3">アプリにアクセス</p>
                <div class="grid grid-cols-4 gap-3">
                    <a href="https://facility-care-input-form.web.app/input/meal" target="_blank"
                       class="bg-green-500 text-white px-4 py-3 rounded-lg font-semibold hover:bg-green-400 transition text-center text-sm">
                        <span class="block text-2xl mb-1">👨‍⚕️</span>
                        スタッフ用
                    </a>
                    <a href="https://facility-care-input-form.web.app/family" target="_blank"
                       class="bg-pink-500 text-white px-4 py-3 rounded-lg font-semibold hover:bg-pink-400 transition text-center text-sm">
                        <span class="block text-2xl mb-1">👨‍👩‍👧</span>
                        家族用
                    </a>
                    <a href="https://facility-care-input-form.web.app/input/meal?admin=true" target="_blank"
                       class="bg-yellow-500 text-black px-4 py-3 rounded-lg font-semibold hover:bg-yellow-400 transition text-center text-sm">
                        <span class="block text-2xl mb-1">⚙️</span>
                        管理者
                    </a>
                    <a href="https://facility-care-input-form.web.app/demo" target="_blank"
                       class="bg-purple-500 text-white px-4 py-3 rounded-lg font-semibold hover:bg-purple-400 transition text-center text-sm">
                        <span class="block text-2xl mb-1">🎯</span>
                        デモ
                    </a>
                </div>
                <div class="mt-3 flex gap-3 justify-center">
                    <a href="https://github.com/yasushihonda-acg/facility-care-input-form" target="_blank"
                       class="text-blue-200 hover:text-white text-sm flex items-center gap-1">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
                        GitHub
                    </a>
                    <a href="architecture.html"
                       class="text-blue-200 hover:text-white text-sm flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/></svg>
                        アーキテクチャ図
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-10">
        <div class="container mx-auto px-4">
            <div class="flex overflow-x-auto">
                <button onclick="showTab('overview')" class="tab-btn active flex-shrink-0 px-6 py-4 text-sm font-medium border-b-2 border-transparent hover:bg-gray-50 transition">
                    概要
                </button>
                <button onclick="showTab('features')" class="tab-btn flex-shrink-0 px-6 py-4 text-sm font-medium border-b-2 border-transparent hover:bg-gray-50 transition">
                    機能一覧
                </button>
                <button onclick="showTab('architecture')" class="tab-btn flex-shrink-0 px-6 py-4 text-sm font-medium border-b-2 border-transparent hover:bg-gray-50 transition">
                    システム構成
                </button>
                <button onclick="showTab('progress')" class="tab-btn flex-shrink-0 px-6 py-4 text-sm font-medium border-b-2 border-transparent hover:bg-gray-50 transition">
                    開発進捗
                </button>
                <button onclick="showTab('docs')" class="tab-btn flex-shrink-0 px-6 py-4 text-sm font-medium border-b-2 border-transparent hover:bg-gray-50 transition">
                    ドキュメント
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">

        <!-- Tab: Overview -->
        <div id="tab-overview" class="tab-content active">
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <span class="text-2xl">🎯</span> プロジェクト目的
                    </h2>
                    <p class="text-gray-600 leading-relaxed">
                        介護施設スタッフの食事記録入力と、ご家族への情報共有を実現するプロトタイプアプリケーション。
                        FAXベースのコミュニケーションをデジタル化し、リアルタイムな情報共有を可能にします。
                    </p>
                    <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                        <h3 class="font-semibold text-blue-800 mb-2">主な価値</h3>
                        <ul class="text-sm text-blue-700 space-y-1">
                            <li>・スタッフの記録入力負荷を軽減</li>
                            <li>・家族がリアルタイムにケア状況を確認</li>
                            <li>・AIによる入力補助で効率化</li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <span class="text-2xl">🛠️</span> 技術スタック
                    </h2>
                    <div class="space-y-4">
                        <div>
                            <h3 class="text-sm font-semibold text-gray-500 mb-2">フロントエンド</h3>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">React</span>
                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">TypeScript</span>
                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Vite</span>
                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">TailwindCSS</span>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-500 mb-2">バックエンド / インフラ</h3>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm">Firebase</span>
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">Cloud Functions</span>
                                <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm">Firestore</span>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-500 mb-2">外部連携</h3>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full text-sm">Google Sheets</span>
                                <span class="bg-cyan-100 text-cyan-800 px-3 py-1 rounded-full text-sm">Google Drive</span>
                                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">Vertex AI (Gemini)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Types -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                    <span class="text-2xl">👥</span> ユーザータイプ別機能
                </h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="border-2 border-green-200 rounded-xl p-5 bg-green-50">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="text-4xl">👨‍⚕️</span>
                            <div>
                                <h3 class="font-bold text-green-800">スタッフ</h3>
                                <p class="text-sm text-green-600">記録入力・閲覧</p>
                            </div>
                        </div>
                        <ul class="text-sm text-green-700 space-y-2">
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>食事・ケア記録の入力</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>写真アップロード</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>タスク管理・リマインダー</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>家族からの連絡確認</span>
                            </li>
                        </ul>
                        <a href="https://facility-care-input-form.web.app/input/meal" target="_blank"
                           class="mt-4 block text-center bg-green-600 text-white py-2 rounded-lg hover:bg-green-500 transition text-sm font-semibold">
                            スタッフ画面を開く →
                        </a>
                    </div>
                    <div class="border-2 border-pink-200 rounded-xl p-5 bg-pink-50">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="text-4xl">👨‍👩‍👧</span>
                            <div>
                                <h3 class="font-bold text-pink-800">家族</h3>
                                <p class="text-sm text-pink-600">状況確認・連絡</p>
                            </div>
                        </div>
                        <ul class="text-sm text-pink-700 space-y-2">
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>ケア記録の閲覧</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>品物の送付・在庫管理</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>ケア指示の作成</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>統計ダッシュボード</span>
                            </li>
                        </ul>
                        <a href="https://facility-care-input-form.web.app/family" target="_blank"
                           class="mt-4 block text-center bg-pink-600 text-white py-2 rounded-lg hover:bg-pink-500 transition text-sm font-semibold">
                            家族画面を開く →
                        </a>
                    </div>
                    <div class="border-2 border-yellow-200 rounded-xl p-5 bg-yellow-50">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="text-4xl">⚙️</span>
                            <div>
                                <h3 class="font-bold text-yellow-800">管理者</h3>
                                <p class="text-sm text-yellow-600">システム設定</p>
                            </div>
                        </div>
                        <ul class="text-sm text-yellow-700 space-y-2">
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>Webhook URL設定</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>Driveフォルダ設定</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>初期値設定</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span>✓</span>
                                <span>設定テスト機能</span>
                            </li>
                        </ul>
                        <a href="https://facility-care-input-form.web.app/input/meal?admin=true" target="_blank"
                           class="mt-4 block text-center bg-yellow-600 text-white py-2 rounded-lg hover:bg-yellow-500 transition text-sm font-semibold">
                            管理者画面を開く →
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Features -->
        <div id="tab-features" class="tab-content">
            <!-- Feature Categories -->
            <div class="space-y-8">
                <!-- Core Features -->
                <div>
                    <h2 class="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <span class="w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm">1</span>
                        コア機能
                    </h2>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500">
                            <div class="text-2xl mb-2">📋</div>
                            <h3 class="font-semibold mb-1">記録閲覧</h3>
                            <p class="text-gray-600 text-sm">スプレッドシートから自動同期されたケア記録をタブ形式で閲覧。検索・ソート機能付き。</p>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500">
                            <div class="text-2xl mb-2">🍽️</div>
                            <h3 class="font-semibold mb-1">食事入力フォーム</h3>
                            <p class="text-gray-600 text-sm">スタッフが食事記録を入力。写真アップロード、Google Chat通知に対応。</p>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500">
                            <div class="text-2xl mb-2">👨‍👩‍👧</div>
                            <h3 class="font-semibold mb-1">家族ビュー</h3>
                            <p class="text-gray-600 text-sm">ご家族向けのタイムライン表示。ケア指示（Plan）と実績（Result）を対比表示。</p>
                        </div>
                    </div>
                </div>

                <!-- Integration Features -->
                <div>
                    <h2 class="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <span class="w-8 h-8 bg-indigo-500 text-white rounded-full flex items-center justify-center text-sm">2</span>
                        連携機能
                    </h2>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500">
                            <div class="text-2xl mb-2">💬</div>
                            <h3 class="font-semibold mb-1">Google Chat通知</h3>
                            <p class="text-gray-600 text-sm">食事記録入力時にWebhookで自動通知。重要フラグ付きは別チャンネルにも通知。</p>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500">
                            <div class="text-2xl mb-2">📷</div>
                            <h3 class="font-semibold mb-1">写真アップロード</h3>
                            <p class="text-gray-600 text-sm">Google Driveへの画像保存。フォルダIDは管理者設定で変更可能。</p>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500">
                            <div class="text-2xl mb-2">🧪</div>
                            <h3 class="font-semibold mb-1">設定テスト機能</h3>
                            <p class="text-gray-600 text-sm">Webhook URLやDriveフォルダIDの設定を保存前にテスト。親切なエラーメッセージ付き。</p>
                        </div>
                    </div>
                </div>

                <!-- Phase 8 Features -->
                <div>
                    <h2 class="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <span class="w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm">3</span>
                        Phase 8 新機能
                        <span class="ml-2 bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full">最新</span>
                    </h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-purple-500">
                            <div class="text-2xl mb-2">📦</div>
                            <h3 class="font-semibold mb-1">品物管理</h3>
                            <p class="text-gray-600 text-sm">家族が送付した品物の登録・追跡。賞味期限・在庫管理、提供・摂食記録。</p>
                            <span class="inline-block mt-2 bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-xs">Phase 8.1</span>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-purple-500">
                            <div class="text-2xl mb-2">✅</div>
                            <h3 class="font-semibold mb-1">タスク管理</h3>
                            <p class="text-gray-600 text-sm">スタッフ向けタスク管理。賞味期限警告・提供リマインダーを毎日自動生成。</p>
                            <span class="inline-block mt-2 bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-xs">Phase 8.2</span>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-purple-500">
                            <div class="text-2xl mb-2">📊</div>
                            <h3 class="font-semibold mb-1">統計ダッシュボード</h3>
                            <p class="text-gray-600 text-sm">品物状況・アラートを可視化。スタッフ・家族共通ビューで認識のズレを防止。</p>
                            <span class="inline-block mt-2 bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-xs">Phase 8.3</span>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-purple-500">
                            <div class="text-2xl mb-2">🤖</div>
                            <h3 class="font-semibold mb-1">Gemini AI連携</h3>
                            <p class="text-gray-600 text-sm">品物名からAIが賞味期限・保存方法・提供方法を自動提案。高齢者向けの注意点も表示。</p>
                            <span class="inline-block mt-2 bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-xs">Phase 8.4</span>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-purple-500">
                            <div class="text-2xl mb-2">📌</div>
                            <h3 class="font-semibold mb-1">プリセット管理</h3>
                            <p class="text-gray-600 text-sm">「いつもの指示」の登録・管理。AI提案をワンクリックでプリセット保存。</p>
                            <span class="inline-block mt-2 bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-xs">Phase 8.6/8.7</span>
                        </div>
                    </div>
                </div>

                <!-- Phase 9 Features -->
                <div>
                    <h2 class="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <span class="w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center text-sm">4</span>
                        Phase 9 新機能
                        <span class="ml-2 bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full">最新</span>
                    </h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500">
                            <div class="text-2xl mb-2">🗂️</div>
                            <h3 class="font-semibold mb-1">ビュー構成設計</h3>
                            <p class="text-gray-600 text-sm">スタッフ/家族別ビュー分離。共有ページとロール別ページの整理。</p>
                            <span class="inline-block mt-2 bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs">Phase 9.0 ✅完了</span>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500">
                            <div class="text-2xl mb-2">🔀</div>
                            <h3 class="font-semibold mb-1">ルーティング実装</h3>
                            <p class="text-gray-600 text-sm">品物タイムライン、スタッフ/家族ナビゲーション、共有ビューの実装。</p>
                            <span class="inline-block mt-2 bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs">Phase 9.1 ✅完了</span>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500">
                            <div class="text-2xl mb-2">📝</div>
                            <h3 class="font-semibold mb-1">消費記録連携</h3>
                            <p class="text-gray-600 text-sm">提供・摂食記録API、在庫バー表示、タイムラインとの連携。</p>
                            <span class="inline-block mt-2 bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs">Phase 9.2 ✅完了</span>
                        </div>
                        <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500">
                            <div class="text-2xl mb-2">🚫</div>
                            <h3 class="font-semibold mb-1">禁止ルール機能</h3>
                            <p class="text-gray-600 text-sm">家族が設定した提供禁止品目をスタッフに警告表示。入居者設定画面で管理。</p>
                            <span class="inline-block mt-2 bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs">Phase 9.x ✅完了</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Architecture -->
        <div id="tab-architecture" class="tab-content">
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                    <span class="text-2xl">🏗️</span> システムデータフロー
                </h2>
                <div class="overflow-x-auto">
                    <div class="mermaid">
flowchart TB
    subgraph External[外部サービス]
        SheetA[Sheet A - 記録の結果]
        SheetB[Sheet B - 実績入力]
        GDrive[Google Drive - 写真保存]
        GChat[Google Chat - Webhook]
        Gemini[Vertex AI - Gemini]
    end

    subgraph Backend[Cloud Functions]
        Sync[syncPlanData]
        Get[getPlanData]
        Submit[submitMealRecord]
        Upload[uploadCareImage]
        CareItems[submitCareItem]
        Tasks[getTasks]
        Stats[getStats]
        AISuggest[aiSuggest]
        TaskGen[generateDailyTasks]
    end

    subgraph Storage[Firestore]
        PlanData[plan_data]
        Settings[settings]
        CareItemsDB[care_items]
        TasksDB[tasks]
    end

    subgraph Frontend[React PWA]
        Home[記録閲覧]
        Input[食事入力]
        Family[家族ビュー]
        Items[品物管理]
        Dashboard[統計]
    end

    SheetA --> Sync
    Sync --> PlanData
    PlanData --> Get
    Get --> Home
    Get --> Family

    Input --> Submit
    Submit --> SheetB
    Submit --> GChat

    Input --> Upload
    Upload --> GDrive

    Items --> CareItems
    CareItems --> CareItemsDB
    CareItems --> AISuggest
    AISuggest --> Gemini

    TaskGen --> CareItemsDB
    TaskGen --> TasksDB
    Tasks --> TasksDB
    Tasks --> Dashboard

    Stats --> CareItemsDB
    Stats --> Dashboard

    Settings -.-> Submit
    Settings -.-> Upload
                    </div>
                </div>
                <div class="mt-6 text-center">
                    <a href="architecture.html" class="inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-500 transition">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
                        詳細なアーキテクチャ図を見る
                    </a>
                </div>
            </div>
        </div>

        <!-- Tab: Progress -->
        <div id="tab-progress" class="tab-content">
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                    <span class="text-2xl">📈</span> 開発進捗
                </h2>
                <div class="space-y-6">
                    <div class="border-l-4 border-green-500 pl-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold text-gray-800">Phase 1-4: 基盤〜デモ版</span>
                            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">Firebase基盤構築、PWA化、Sheets連携</p>
                    </div>
                    <div class="border-l-4 border-green-500 pl-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold text-gray-800">Phase 5: 食事入力〜設定改善</span>
                            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">食事入力フォーム、写真アップロード、管理設定、テスト機能</p>
                    </div>
                    <div class="border-l-4 border-green-500 pl-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold text-gray-800">Phase 6: フッターナビゲーション</span>
                            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">PWAフッターナビ、画面遷移改善</p>
                    </div>
                    <div class="border-l-4 border-green-500 pl-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold text-gray-800">Phase 7: 家族ビュー・予実管理</span>
                            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">家族向けUX、予定vs実績表示、ケア指示</p>
                    </div>
                    <div class="border-l-4 border-green-500 pl-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold text-gray-800">Phase 8: 品物管理・タスク・統計・AI連携</span>
                            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">品物管理、タスク自動生成、統計、Gemini AI連携、プリセット管理</p>
                    </div>
                    <div class="border-l-4 border-green-500 pl-4 bg-green-50 -mx-4 px-4 py-3 rounded-r-lg">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold text-gray-800 flex items-center gap-2">
                                Phase 9: 在庫・消費追跡システム
                                <span class="bg-green-600 text-white text-xs px-2 py-0.5 rounded">最新</span>
                            </span>
                            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-1">ビュー構成設計(✅)、ルーティング実装(✅)、消費記録連携(✅)、禁止ルール機能(✅)</p>
                    </div>
                    <div class="border-l-4 border-green-500 pl-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold text-gray-800">Phase 9.3: 統計ダッシュボード拡張</span>
                            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">在庫サマリーAPI、食品傾向分析API、摂食傾向タブ、在庫バーグラフ</p>
                    </div>
                    <div class="border-l-4 border-green-500 pl-4 bg-green-50 -mx-4 px-4 py-3 rounded-r-lg mt-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold text-gray-800 flex items-center gap-2">
                                デモショーケース実装
                                <span class="bg-green-600 text-white text-xs px-2 py-0.5 rounded">完了</span>
                            </span>
                            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">100%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-1">デモ専用ページ、シードデータ、ガイド付きツアー、ツアーナビゲーション改善、E2Eテスト42件（全Phase完了）</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Documents -->
        <div id="tab-docs" class="tab-content">
            <div class="space-y-6">
                <!-- Essential Docs -->
                <div>
                    <h2 class="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <span class="text-red-500">📍</span> 必読ドキュメント
                    </h2>
                    <div class="grid md:grid-cols-3 gap-4">
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/CURRENT_STATUS.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-red-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-red-600">CURRENT_STATUS.md</h3>
                            <p class="text-sm text-gray-600">現在の進捗・次のタスク</p>
                        </a>
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/HANDOVER.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-purple-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-purple-600">HANDOVER.md</h3>
                            <p class="text-sm text-gray-600">引き継ぎドキュメント</p>
                        </a>
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/ROADMAP.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-blue-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-blue-600">ROADMAP.md</h3>
                            <p class="text-sm text-gray-600">開発ロードマップ</p>
                        </a>
                    </div>
                </div>

                <!-- Architecture Docs -->
                <div>
                    <h2 class="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <span class="text-green-500">🏗️</span> 設計・仕様
                    </h2>
                    <div class="grid md:grid-cols-3 gap-4">
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/ARCHITECTURE.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-green-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-green-600">ARCHITECTURE.md</h3>
                            <p class="text-sm text-gray-600">システム設計</p>
                        </a>
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/API_SPEC.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-orange-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-orange-600">API_SPEC.md</h3>
                            <p class="text-sm text-gray-600">API仕様書</p>
                        </a>
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/BUSINESS_RULES.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-red-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-red-600">BUSINESS_RULES.md</h3>
                            <p class="text-sm text-gray-600">業務ルール・データ仕様</p>
                        </a>
                    </div>
                </div>

                <!-- Feature Docs -->
                <div>
                    <h2 class="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <span class="text-blue-500">📝</span> 機能別仕様
                    </h2>
                    <div class="grid md:grid-cols-3 gap-4">
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/FAMILY_UX_DESIGN.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-pink-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-pink-600">FAMILY_UX_DESIGN.md</h3>
                            <p class="text-sm text-gray-600">家族向けUX設計</p>
                        </a>
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/SETTINGS_MODAL_UI_SPEC.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-yellow-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-yellow-600">SETTINGS_MODAL_UI_SPEC.md</h3>
                            <p class="text-sm text-gray-600">設定モーダルUI仕様</p>
                        </a>
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/FOOTER_NAVIGATION_SPEC.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-cyan-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-cyan-600">FOOTER_NAVIGATION_SPEC.md</h3>
                            <p class="text-sm text-gray-600">フッターナビ仕様</p>
                        </a>
                    </div>
                </div>

                <!-- Phase 8 Docs -->
                <div>
                    <h2 class="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <span class="text-purple-500">🆕</span> Phase 8 設計ドキュメント
                    </h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/ITEM_MANAGEMENT_SPEC.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-teal-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-teal-600">ITEM_MANAGEMENT_SPEC.md</h3>
                            <p class="text-sm text-gray-600">品物管理機能設計</p>
                        </a>
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/TASK_MANAGEMENT_SPEC.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-indigo-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-indigo-600">TASK_MANAGEMENT_SPEC.md</h3>
                            <p class="text-sm text-gray-600">タスク管理機能設計</p>
                        </a>
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/STATS_DASHBOARD_SPEC.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-cyan-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-cyan-600">STATS_DASHBOARD_SPEC.md</h3>
                            <p class="text-sm text-gray-600">統計ダッシュボード設計</p>
                        </a>
                        <a href="https://github.com/yasushihonda-acg/facility-care-input-form/blob/main/docs/AI_INTEGRATION_SPEC.md" target="_blank"
                           class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition border-l-4 border-violet-500 group">
                            <h3 class="font-semibold text-gray-800 group-hover:text-violet-600">AI_INTEGRATION_SPEC.md</h3>
                            <p class="text-sm text-gray-600">Gemini AI連携設計</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400">
                © 2025 施設ケア入力フォーム プロジェクト
            </p>
            <p class="text-gray-500 text-sm mt-2">
                最終更新: 2025年12月17日
            </p>
        </div>
    </footer>

    <script>
        // Mermaid initialization - startOnLoad: false for tab control
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: false
            }
        });

        let mermaidRendered = false;

        // Tab switching
        function showTab(tabId) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.remove('active');
            });
            // Deactivate all tab buttons
            document.querySelectorAll('.tab-btn').forEach(el => {
                el.classList.remove('active');
            });
            // Show selected tab content
            document.getElementById('tab-' + tabId).classList.add('active');
            // Activate selected tab button
            event.currentTarget.classList.add('active');

            // Render Mermaid when architecture tab is shown (only once)
            if (tabId === 'architecture' && !mermaidRendered) {
                mermaidRendered = true;
                setTimeout(() => {
                    mermaid.run({
                        nodes: document.querySelectorAll('.mermaid')
                    });
                }, 100);
            }
        }
    </script>
</body>
</html>
