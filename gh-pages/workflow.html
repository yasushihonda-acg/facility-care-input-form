<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>連携フロー - 施設ケア入力フォーム</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        .mermaid {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
        }
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-gradient-to-r from-teal-600 to-cyan-700 text-white py-8">
        <div class="container mx-auto px-4">
            <nav class="mb-4">
                <a href="index.html" class="text-teal-200 hover:text-white transition">
                    ← トップに戻る
                </a>
            </nav>
            <h1 class="text-3xl font-bold">家族・スタッフ連携フロー</h1>
            <p class="text-teal-200 mt-2">施設ケア入力フォーム - 役割分担と連絡フロー</p>
            <p class="text-teal-300 text-sm mt-1">最終更新: 2026年1月13日</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-12">

        <!-- Overview Section -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-teal-500 pb-2">全体像：家族とスタッフの役割分担</h2>

            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <!-- 家族の役割 -->
                <div class="bg-pink-50 rounded-xl p-6 border-2 border-pink-200">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">👨‍👩‍👧</span>
                        <div>
                            <h3 class="text-xl font-bold text-pink-800">家族</h3>
                            <p class="text-sm text-pink-600">品物の準備・状況確認</p>
                        </div>
                    </div>
                    <ul class="space-y-3 text-pink-700">
                        <li class="flex items-start gap-2">
                            <span class="text-pink-500 font-bold">1.</span>
                            <span><strong>品物を登録</strong>：品名・数量・提供方法・スケジュール等をまとめて登録</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-pink-500 font-bold">2.</span>
                            <span><strong>消費状況を確認</strong>：タイムラインで摂食記録を閲覧</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-pink-500 font-bold">3.</span>
                            <span><strong>廃棄を依頼</strong>：期限切れ品物の廃棄をスタッフに依頼</span>
                        </li>
                    </ul>
                </div>

                <!-- スタッフの役割 -->
                <div class="bg-green-50 rounded-xl p-6 border-2 border-green-200">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">👨‍⚕️</span>
                        <div>
                            <h3 class="text-xl font-bold text-green-800">スタッフ</h3>
                            <p class="text-sm text-green-600">品物の提供・記録入力</p>
                        </div>
                    </div>
                    <ul class="space-y-3 text-green-700">
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 font-bold">1.</span>
                            <span><strong>提供指示を確認</strong>：品物の提供方法を確認</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 font-bold">2.</span>
                            <span><strong>品物を提供</strong>：指示に従って入居者様に提供</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 font-bold">3.</span>
                            <span><strong>摂食記録を入力</strong>：食べた量・状況を記録</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 font-bold">4.</span>
                            <span><strong>廃棄を実行</strong>：家族からの依頼に基づき廃棄処理</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 全体フロー図 -->
            <div class="bg-white rounded-lg shadow-md p-6 overflow-x-auto">
                <h3 class="font-semibold text-gray-800 mb-4">基本的な連携フロー</h3>
                <div class="mermaid">
                    flowchart LR
                        subgraph Family["👨‍👩‍👧 家族"]
                            F1["品物を登録"]
                            F2["消費状況を確認"]
                        end
                        subgraph App["📱 アプリ"]
                            A1["品物一覧"]
                            A2["タイムライン"]
                        end
                        subgraph Staff["👨‍⚕️ スタッフ"]
                            S1["提供指示を確認"]
                            S2["品物を提供"]
                            S3["摂食記録を入力"]
                        end
                        F1 --> A1
                        A1 --> S1
                        S1 --> S2
                        S2 --> S3
                        S3 --> A2
                        A2 --> F2
                        style Family fill:#fce7f3,stroke:#ec4899
                        style Staff fill:#dcfce7,stroke:#22c55e
                        style App fill:#e0f2fe,stroke:#0ea5e9
                </div>
                <p class="text-sm text-gray-500 mt-2">※ 品物登録時に提供方法・スケジュールも一緒に設定します</p>
            </div>
        </section>

        <!-- Item Registration Flow -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-pink-500 pb-2">Flow 1: 品物登録フロー</h2>
            <p class="text-gray-600 mb-4">家族が品物を登録し、スタッフに提供指示が伝わるまでのフロー</p>

            <div class="bg-white rounded-lg shadow-md p-6 overflow-x-auto mb-6">
                <div class="mermaid">
                    sequenceDiagram
                        participant F as 👨‍👩‍👧 家族
                        participant App as 📱 アプリ
                        participant S as 👨‍⚕️ スタッフ
                        F->>App: 品物を登録
                        Note over F,App: 品名・数量・賞味期限<br/>提供方法・スケジュール等
                        App-->>App: 登録完了
                        Note over App: 家族が入力した<br/>提供指示をスタッフに表示
                        S->>App: 提供指示を確認
                        App-->>S: 品物の提供指示を表示
                        Note over S: 「プリン 3個<br/>小分けにして提供」など
                </div>
            </div>

        </section>

        <!-- Consumption Record Flow -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-green-500 pb-2">Flow 2: 摂食記録フロー</h2>
            <p class="text-gray-600 mb-4">スタッフが品物を提供し、摂食記録を入力するフロー</p>

            <div class="bg-white rounded-lg shadow-md p-6 overflow-x-auto mb-6">
                <div class="mermaid">
                    sequenceDiagram
                        participant S as 👨‍⚕️ スタッフ
                        participant App as 📱 アプリ
                        participant F as 👨‍👩‍👧 家族
                        S->>App: 記録入力画面を開く
                        App-->>S: 提供可能な品物を表示
                        S->>App: 品物を選択
                        S->>App: 摂食量等を入力
                        opt 写真あり
                            S->>App: 写真を撮影
                        end
                        S->>App: 記録を送信
                        App-->>App: 残量を自動更新
                        F->>App: タイムラインを確認
                        App-->>F: 摂食記録を表示
                </div>
            </div>

        </section>

        <!-- Discard Flow -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-red-500 pb-2">Flow 3: 廃棄指示フロー</h2>
            <p class="text-gray-600 mb-4">家族が期限切れ品物の廃棄をスタッフに依頼するフロー</p>

            <div class="bg-white rounded-lg shadow-md p-6 overflow-x-auto mb-6">
                <div class="mermaid">
                    sequenceDiagram
                        participant F as 👨‍👩‍👧 家族
                        participant App as 📱 アプリ
                        participant S as 👨‍⚕️ スタッフ
                        Note over F: 品物一覧で<br/>期限切れ品物を発見
                        F->>App: 「廃棄」ボタンをタップ
                        App-->>F: 「スタッフに通知中...」表示
                        S->>App: 廃棄依頼を確認
                        App-->>S: 廃棄指示リスト表示
                        S->>S: 実際に品物を廃棄
                        S->>App: 「廃棄完了」ボタン
                        Note over F,S: 品物が一覧から消える
                </div>
            </div>

        </section>

        <!-- Unregistered Item Flow -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-yellow-500 pb-2">Flow 4: 未登録品物の対応フロー（現状）</h2>
            <p class="text-gray-600 mb-4">スタッフが未登録の品物を発見した場合の連絡フロー</p>

            <div class="bg-white rounded-lg shadow-md p-6 overflow-x-auto mb-6">
                <h3 class="font-semibold text-gray-800 mb-4">現状の連絡フロー</h3>
                <div class="mermaid">
                    sequenceDiagram
                        participant S as 👨‍⚕️ スタッフ<br/>（現場）
                        participant Dev as 🧑‍💻 開発者<br/>（本田）
                        participant F as 👨‍👩‍👧 家族
                        Note over S: 未登録の品物を発見<br/>「このお菓子、登録されてない...」
                        S->>Dev: 連絡<br/>「△△が登録されていません」
                        Dev->>F: 連絡<br/>「品物の登録をお願いします」
                        F->>F: アプリで品物登録
                        Note over S,F: 登録完了後、<br/>スタッフが記録入力可能に
                </div>
            </div>

        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400">
                © 2025-2026 施設ケア入力フォーム プロジェクト
            </p>
            <div class="mt-4 space-x-4">
                <a href="index.html" class="text-gray-400 hover:text-white transition">トップ</a>
                <a href="architecture.html" class="text-gray-400 hover:text-white transition">アーキテクチャ</a>
                <a href="https://github.com/yasushihonda-acg/facility-care-input-form" target="_blank"
                   class="text-gray-400 hover:text-white transition">GitHub</a>
                <a href="https://facility-care-input-form.web.app/demo" target="_blank"
                   class="text-gray-400 hover:text-white transition">デモ</a>
            </div>
            <p class="text-gray-500 text-sm mt-4">
                最終更新: 2026年1月13日
            </p>
        </div>
    </footer>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                useMaxWidth: true,
                actorMargin: 50,
                messageMargin: 40
            }
        });
    </script>
</body>
</html>
