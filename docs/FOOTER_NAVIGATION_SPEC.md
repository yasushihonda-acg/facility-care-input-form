# フッターナビゲーション設計書

> **ステータス**: 設計中
> **作成日**: 2025-12-14
> **関連**: [MEAL_INPUT_FORM_SPEC.md](./MEAL_INPUT_FORM_SPEC.md), [DEMO_PWA_SPEC.md](./DEMO_PWA_SPEC.md)

---

## 概要

モバイルUXを改善するため、FABボタン方式からフッターナビゲーション方式に変更する。
「読み取り専用ビュー」と「書き込み専用ビュー」を明確に分離し、介護スタッフが迷わず操作できるUIを実現する。

---

## 現状の課題

### FABボタン方式の問題点

| 問題 | 詳細 |
|------|------|
| 発見性が低い | 右下のFABボタンは目立たず、初見ユーザーは入力方法がわからない |
| 操作性が悪い | 画面右下は片手操作時に親指が届きにくい（特に大画面スマホ） |
| コンテキストが曖昧 | 「閲覧中」か「入力中」かが視覚的に不明確 |
| 拡張性が低い | 入力フォームが増えた場合、FABメニューが煩雑になる |

### ターゲットユーザー特性

- 介護スタッフ（20代〜60代）
- 業務中にスマホで素早く入力したい
- ITリテラシーは様々
- 手袋をしていることもある（タッチ精度低下）

---

## 設計方針

### 1. 完全なビュー分離

```
アプリ構成
├── 閲覧ビュー (View)     ← 読み取り専用
│   └── 記録一覧（シート別タブ）
│
└── 入力ビュー (Input)    ← 書き込み専用
    ├── 食事記録
    ├── 水分記録
    ├── 排泄記録
    ├── バイタル記録
    └── 特記事項
```

### 2. フッターナビゲーション

画面下部に固定表示のナビゲーションバーを配置。

```
┌──────────────────────────────────────┐
│              [Header]                │
├──────────────────────────────────────┤
│                                      │
│         [メインコンテンツ]            │
│                                      │
│                                      │
├──────────────────────────────────────┤
│    📋 記録閲覧    │    ✏️ 記録入力    │
└──────────────────────────────────────┘
```

### 3. 入力ビューの構成

入力ビューでは、入力種別をカード形式で一覧表示。

```
┌──────────────────────────────────────┐
│          記録入力                    │
├──────────────────────────────────────┤
│  ┌────────────┐  ┌────────────┐      │
│  │ 🍽️ 食事    │  │ 💧 水分    │      │
│  │ 記録       │  │ 記録       │      │
│  └────────────┘  └────────────┘      │
│                                      │
│  ┌────────────┐  ┌────────────┐      │
│  │ 🚻 排泄    │  │ ❤️ バイタル │      │
│  │ 記録       │  │ 記録       │      │
│  └────────────┘  └────────────┘      │
│                                      │
│  ┌────────────┐                      │
│  │ 📝 特記事項 │                      │
│  │            │                      │
│  └────────────┘                      │
│                                      │
├──────────────────────────────────────┤
│    📋 記録閲覧    │    ✏️ 記録入力    │
└──────────────────────────────────────┘
```

---

## UI仕様

### フッターナビゲーション

| 項目 | 仕様 |
|------|------|
| 高さ | 56px（iOS Safe Area考慮で +34px） |
| 背景色 | white |
| 境界線 | 上部に `border-t border-gray-200` |
| 影 | `shadow-lg` |
| 位置 | `fixed bottom-0` |

### ナビアイテム

| 項目 | 仕様 |
|------|------|
| タッチターゲット | 最小 48x48px |
| アイコンサイズ | 24px |
| ラベルサイズ | 12px |
| アクティブ色 | Primary (#2563EB) |
| 非アクティブ色 | Gray-500 |

### Safe Area対応

```css
/* iOS Safari 対応 */
padding-bottom: env(safe-area-inset-bottom, 0);
```

---

## ルーティング設計

### 変更前

| パス | コンポーネント | 説明 |
|------|----------------|------|
| `/` | HomePage | 記録閲覧 + FABボタン |
| `/input/meal` | MealInputPage | 食事入力フォーム |

### 変更後

| パス | コンポーネント | 説明 |
|------|----------------|------|
| `/` | リダイレクト → `/view` | - |
| `/view` | ViewPage | 記録閲覧ビュー |
| `/input` | InputPage | 入力メニュー |
| `/input/meal` | MealInputPage | 食事入力フォーム |
| `/input/hydration` | HydrationInputPage | 水分入力フォーム |
| `/input/excretion` | ExcretionInputPage | 排泄入力フォーム |
| `/input/vital` | VitalInputPage | バイタル入力フォーム |
| `/input/note` | NoteInputPage | 特記事項入力フォーム |

---

## コンポーネント設計

### 新規コンポーネント

| コンポーネント | 役割 |
|----------------|------|
| `FooterNav.tsx` | フッターナビゲーション |
| `Layout.tsx` | 共通レイアウト（Header + Footer + Main） |
| `ViewPage.tsx` | 記録閲覧ビュー（旧HomePage） |
| `InputPage.tsx` | 入力メニュー（カード一覧） |
| `InputCard.tsx` | 入力種別カード |

### 変更コンポーネント

| コンポーネント | 変更内容 |
|----------------|----------|
| `App.tsx` | ルーティング変更、Layout適用 |
| `HomePage.tsx` | ViewPage にリネーム、FAB削除 |

---

## 実装ステップ

### Phase 6.0: フッターナビゲーション基盤

1. `Layout.tsx` 作成（Header + Main + FooterNav）
2. `FooterNav.tsx` 作成
3. `App.tsx` ルーティング変更
4. Safe Area 対応

### Phase 6.1: ビュー分離

1. `HomePage.tsx` → `ViewPage.tsx` リネーム
2. FABボタン削除
3. `InputPage.tsx` 作成（入力メニュー）
4. `InputCard.tsx` 作成

### Phase 6.2: 追加入力フォーム（将来）

1. 水分入力フォーム
2. 排泄入力フォーム
3. バイタル入力フォーム
4. 特記事項入力フォーム

---

## デザイントークン

### フッター用

```css
/* index.css @theme に追加 */
--footer-height: 56px;
--footer-height-safe: calc(56px + env(safe-area-inset-bottom, 0));
--footer-bg: #ffffff;
--footer-border: #e5e7eb;
--footer-active: var(--color-primary);
--footer-inactive: #6b7280;
```

---

## アクセシビリティ

| 項目 | 対応 |
|------|------|
| タッチターゲット | 48x48px 以上 |
| コントラスト比 | 4.5:1 以上 |
| aria-current | アクティブタブに設定 |
| role="navigation" | フッターに設定 |

---

## 参考: 類似アプリのナビゲーション

| アプリ | ナビ方式 | タブ数 |
|--------|----------|--------|
| LINE | フッター5タブ | ホーム/トーク/VOOM/ニュース/ウォレット |
| Instagram | フッター5タブ | ホーム/検索/リール/ショップ/プロフィール |
| Twitter/X | フッター5タブ | ホーム/検索/スペース/通知/DM |
| 介護記録アプリ（一般） | フッター3-4タブ | 記録/入力/設定 など |

→ **2タブ構成**はシンプルで迷いにくい

---

## 承認・次のアクション

- [ ] ユーザー承認
- [ ] Phase 6.0 実装開始
