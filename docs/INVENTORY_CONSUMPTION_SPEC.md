# åœ¨åº«ãƒ»æ¶ˆè²»è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ  è©³ç´°è¨­è¨ˆæ›¸

> **æœ€çµ‚æ›´æ–°**: 2025å¹´12æœˆ16æ—¥
>
> æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€å“ç‰©ã®åœ¨åº«ç®¡ç†ã¨æ¶ˆè²»è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ ã®è©³ç´°è¨­è¨ˆã‚’å®šç¾©ã—ã¾ã™ã€‚
> å®¶æ—ã¨ã‚¹ã‚¿ãƒƒãƒ•é–“ã®ãƒ‡ãƒ¼ã‚¿äº¤å·®ã‚’å®Ÿç¾ã—ã€è©³ç´°ãªåœ¨åº«ãƒ»æ‘‚é£Ÿå‚¾å‘åˆ†æã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

---

## 1. æ¦‚è¦

### 1.1 èƒŒæ™¯ãƒ»ç›®çš„

å¾“æ¥ã®å“ç‰©ç®¡ç†ã§ã¯ä»¥ä¸‹ã®èª²é¡ŒãŒã‚ã‚Šã¾ã—ãŸï¼š

| èª²é¡Œ | è©³ç´° |
|------|------|
| åœ¨åº«è¿½è·¡ã®ç²’åº¦ãŒç²—ã„ | 1å›ã®æä¾›ãƒ»æ‘‚é£Ÿã—ã‹è¨˜éŒ²ã§ããªã„ |
| æ¶ˆè²»å±¥æ­´ãŒæ®‹ã‚‰ãªã„ | è¤‡æ•°å›ã«åˆ†ã‘ãŸæä¾›å±¥æ­´ãŒè¿½è·¡ã§ããªã„ |
| éƒ¨åˆ†æ¶ˆè²»ãŒè¡¨ç¾ã§ããªã„ | ã€Œ4æˆ¿ä¸­1æˆ¿ã®åŠåˆ†ã‚’é£Ÿã¹ãŸã€ãŒè¨˜éŒ²ã§ããªã„ |
| é£Ÿå“åˆ¥çµ±è¨ˆãŒãªã„ | é£Ÿå“ã”ã¨ã®å¥½ã¿å‚¾å‘ãŒåˆ†æã§ããªã„ |

### 1.2 è¨­è¨ˆç›®æ¨™

1. **è©³ç´°ãªåœ¨åº«è¿½è·¡**: å°æ•°ç‚¹å˜ä½ã§ã®æ®‹é‡ç®¡ç†
2. **æ¶ˆè²»å±¥æ­´ã®è“„ç©**: å…¨ã¦ã®æä¾›ãƒ»æ‘‚é£Ÿã‚’æ™‚ç³»åˆ—ã§è¨˜éŒ²
3. **åŒæ–¹å‘ã®æƒ…å ±å…±æœ‰**: å®¶æ—â‡„ã‚¹ã‚¿ãƒƒãƒ•é–“ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«çŠ¶æ³ã‚’å…±æœ‰
4. **é£Ÿå“å‚¾å‘åˆ†æ**: é£Ÿå“åˆ¥ãƒ»ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®æ‘‚é£Ÿå‚¾å‘ã‚’å¯è¦–åŒ–

### 1.3 è¨­è¨ˆåŸå‰‡

1. **3å±¤ãƒ¢ãƒ‡ãƒ«**: FoodMaster / CareItem / ConsumptionLog ã®åˆ†é›¢
2. **ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«å±¥æ­´**: æ¶ˆè²»ãƒ­ã‚°ã¯è¿½è¨˜ã®ã¿ã€ç·¨é›†ãƒ»å‰Šé™¤ã¯ç®¡ç†è€…é™å®š
3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é›†è¨ˆ**: `currentQuantity` ã¯æ¶ˆè²»ãƒ­ã‚°ã‹ã‚‰è‡ªå‹•è¨ˆç®—
4. **å¾Œæ–¹äº’æ›æ€§**: æ—¢å­˜ã® CareItem ãƒ‡ãƒ¼ã‚¿ã¯ç§»è¡Œå¯èƒ½

---

## 2. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 2.1 3å±¤ãƒ¢ãƒ‡ãƒ«æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FoodMasterï¼ˆé£Ÿå“ãƒã‚¹ã‚¿ï¼‰                        â”‚
â”‚  æ­£è¦åŒ–ã•ã‚ŒãŸé£Ÿå“æƒ…å ± + çµ±è¨ˆãƒ‡ãƒ¼ã‚¿                           â”‚
â”‚  ä¾‹: "ãƒãƒŠãƒŠ" - å¹³å‡è³å‘³æœŸé™7æ—¥ã€å¹³å‡æ‘‚é£Ÿç‡85%              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ å‚ç…§ï¼ˆä»»æ„ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                CareItemï¼ˆå“ç‰©/åœ¨åº«ï¼‰                         â”‚
â”‚  å®¶æ—ãŒç™»éŒ²ã™ã‚‹åœ¨åº«å˜ä½                                      â”‚
â”‚  ä¾‹: "12/16é€ä»˜ã®ãƒãƒŠãƒŠ4æˆ¿" - ç¾åœ¨æ®‹é‡2.5æˆ¿                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ 1:N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ConsumptionLogï¼ˆæ¶ˆè²»ãƒ­ã‚°ï¼‰                       â”‚
â”‚  ã‚¹ã‚¿ãƒƒãƒ•ãŒè¨˜éŒ²ã™ã‚‹æä¾›ãƒ»æ‘‚é£Ÿã®å±¥æ­´                          â”‚
â”‚  ä¾‹: "12/17ã«1æˆ¿æä¾›ã€0.5æˆ¿æ¶ˆè²»"                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 FoodMasterï¼ˆé£Ÿå“ãƒã‚¹ã‚¿ï¼‰

é£Ÿå“ã®æ­£è¦åŒ–æƒ…å ±ã¨çµ±è¨ˆã‚’ç®¡ç†ã—ã¾ã™ã€‚AIææ¡ˆï¼ˆaiSuggestï¼‰ã¨é€£æºã—ã€**å­¦ç¿’ã™ã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚

#### 2.2.1 AIé€£æºãƒ•ãƒ­ãƒ¼ï¼ˆè‡ªå‹•è“„ç©ï¼‰

```
å®¶æ—ãŒå“ç‰©åã‚’å…¥åŠ›ï¼ˆä¾‹: "ã‚­ã‚¦ã‚¤"ï¼‰
         â†“
    aiSuggest API å‘¼ã³å‡ºã—
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: FoodMasteræ¤œç´¢                                         â”‚
â”‚ - åå‰ãƒ»åˆ¥åã§å®Œå…¨ä¸€è‡´ â†’ éƒ¨åˆ†ä¸€è‡´ã®é †ã§ãƒãƒƒãƒãƒ³ã‚°               â”‚
â”‚ - è¦‹ã¤ã‹ã£ãŸå ´åˆ: source="food_master" ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¿”å´         â”‚
â”‚ - è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ: Step 2 ã¸                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Step 2: Gemini API ã§ç”Ÿæˆ                                      â”‚
â”‚ - è³å‘³æœŸé™ã€ä¿å­˜æ–¹æ³•ã€æä¾›æ–¹æ³•ã‚’ AI ãŒææ¡ˆ                      â”‚
â”‚ - source="ai" ã§è¿”å´                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Step 3: FoodMaster ã«è‡ªå‹•ä¿å­˜ï¼ˆæ¨å¥¨è¨­å®šï¼‰                       â”‚
â”‚ - saveToFoodMaster=true ã®å ´åˆã€AIç”Ÿæˆçµæœã‚’è‡ªå‹•ä¿å­˜            â”‚
â”‚ - æ¬¡å›åŒã˜å“ç‰©ã¯ Step 1 ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2.2 è‡ªå‹•è“„ç©ã®ãƒ¡ãƒªãƒƒãƒˆ

| ãƒ¡ãƒªãƒƒãƒˆ | èª¬æ˜ |
|----------|------|
| **APIã‚³ã‚¹ãƒˆå‰Šæ¸›** | åŒã˜å“ç‰©ã¯2å›ç›®ä»¥é™Gemini APIã‚’å‘¼ã°ãªã„ |
| **å¿œç­”é€Ÿåº¦å‘ä¸Š** | Firestoreã‹ã‚‰ã®å³åº§ã®è¿”å´ï¼ˆ~100ms vs ~2sï¼‰ |
| **æ–½è¨­å›ºæœ‰ãƒ‡ãƒ¼ã‚¿æ§‹ç¯‰** | æ™‚é–“ã¨ã¨ã‚‚ã«åˆ©ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ç‰¹åŒ–ã—ãŸé£Ÿå“ãƒã‚¹ã‚¿ãŒè‡ªå‹•æ§‹ç¯‰ |
| **çµ±è¨ˆãƒ‡ãƒ¼ã‚¿è“„ç©** | æ‘‚é£Ÿç‡ãƒ»å¥½ã¿åº¦ãŒè“„ç©ã•ã‚Œã€å°†æ¥ã®åˆ†æãƒ»ææ¡ˆã«æ´»ç”¨ |

#### 2.2.3 ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆsource ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰

| source | èª¬æ˜ | ä¿¡é ¼åº¦ |
|--------|------|--------|
| `food_master` | FoodMasterã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”å´ | é«˜ï¼ˆå®Ÿç¸¾ãƒ™ãƒ¼ã‚¹ï¼‰ |
| `ai` | Gemini APIã§æ–°è¦ç”Ÿæˆ | ä¸­ï¼ˆAIæ¨å®šï¼‰ |
| `default` | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆAIéšœå®³æ™‚ï¼‰ | ä½ï¼ˆæ±ç”¨å€¤ï¼‰ |

#### 2.2.4 FoodMasterãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```typescript
// Firestore: food_masters/{foodId}
interface FoodMaster {
  // === è­˜åˆ¥æƒ…å ± ===
  id: string;                          // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID

  // === åŸºæœ¬æƒ…å ± ===
  name: string;                        // æ­£è¦åŒ–ã•ã‚ŒãŸé£Ÿå“åï¼ˆä¾‹: "ãƒãƒŠãƒŠ"ï¼‰
  aliases: string[];                   // åˆ¥åï¼ˆ"ã°ãªãª", "banana", "ãƒãƒŠãƒŠï¼ˆãƒ•ã‚£ãƒªãƒ”ãƒ³ç”£ï¼‰"ï¼‰
  category: ItemCategory;              // ã‚«ãƒ†ã‚´ãƒª

  // === ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆAIææ¡ˆã®ãƒ™ãƒ¼ã‚¹ï¼‰===
  defaultUnit: string;                 // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå˜ä½ï¼ˆæˆ¿ã€å€‹ã€æœ¬ã€è¢‹ï¼‰
  defaultExpirationDays: number;       // å¹³å‡è³å‘³æœŸé™ï¼ˆæ—¥ï¼‰
  defaultStorageMethod: StorageMethod; // æ¨å¥¨ä¿å­˜æ–¹æ³•
  defaultServingMethods: ServingMethod[]; // æ¨å¥¨æä¾›æ–¹æ³•

  // === æ³¨æ„äº‹é … ===
  careNotes?: string;                  // ã‚±ã‚¢æ™‚ã®æ³¨æ„ç‚¹ï¼ˆèª¤åš¥ãƒªã‚¹ã‚¯ç­‰ï¼‰
  allergyInfo?: string;                // ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±

  // === çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ï¼ˆå®šæœŸãƒãƒƒãƒã§æ›´æ–°ï¼‰===
  stats: {
    totalServed: number;               // ç´¯è¨ˆæä¾›å›æ•°
    totalConsumed: number;             // ç´¯è¨ˆæ¶ˆè²»é‡
    avgConsumptionRate: number;        // å¹³å‡æ‘‚é£Ÿç‡ï¼ˆ0-100ï¼‰
    preferenceScore: number;           // å¥½ã¿åº¦ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
    wasteRate: number;                 // å»ƒæ£„ç‡ï¼ˆ0-100ï¼‰
    lastUpdated: Timestamp;
  };

  // === ãƒ¡ã‚¿æƒ…å ± ===
  isActive: boolean;                   // æœ‰åŠ¹ãƒ•ãƒ©ã‚°
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

### 2.3 CareItemï¼ˆå“ç‰©/åœ¨åº«ï¼‰- æ‹¡å¼µç‰ˆ

å®¶æ—ãŒç™»éŒ²ã™ã‚‹åœ¨åº«å˜ä½ã€‚æ¶ˆè²»ãƒ­ã‚°ã¨é€£æºã—ã¦æ®‹é‡ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã€‚

```typescript
// Firestore: care_items/{itemId}
interface CareItem {
  // === è­˜åˆ¥æƒ…å ± ===
  id: string;                          // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆIDï¼ˆUUIDï¼‰
  residentId: string;                  // å…¥å±…è€…ID
  userId: string;                      // ç™»éŒ²ã—ãŸå®¶æ—ã®ID

  // === é£Ÿå“ãƒã‚¹ã‚¿å‚ç…§ ===
  foodMasterId?: string;               // é£Ÿå“ãƒã‚¹ã‚¿IDï¼ˆä»»æ„ã€çµ±è¨ˆé€£æºç”¨ï¼‰

  // === å“ç‰©åŸºæœ¬æƒ…å ±ï¼ˆå®¶æ—ãŒå…¥åŠ›ï¼‰===
  itemName: string;                    // å“ç‰©åï¼ˆå¿…é ˆï¼‰
  category: ItemCategory;              // ã‚«ãƒ†ã‚´ãƒªï¼ˆå¿…é ˆï¼‰
  sentDate: string;                    // é€ä»˜æ—¥ (YYYY-MM-DD)ï¼ˆå¿…é ˆï¼‰

  // === åœ¨åº«æƒ…å ±ï¼ˆæ•°é‡ç®¡ç†ã®æ ¸å¿ƒï¼‰===
  initialQuantity: number;             // åˆæœŸæ•°é‡ï¼ˆä¾‹: 4ï¼‰
  unit: string;                        // å˜ä½ï¼ˆä¾‹: "æˆ¿"ï¼‰
  currentQuantity: number;             // ç¾åœ¨ã®æ®‹é‡ï¼ˆä¾‹: 2.5ï¼‰â˜…è‡ªå‹•æ›´æ–°

  // === æœŸé™ãƒ»ä¿å­˜ ===
  expirationDate?: string;             // è³å‘³æœŸé™ (YYYY-MM-DD)
  storageMethod?: StorageMethod;       // ä¿å­˜æ–¹æ³•

  // === æä¾›å¸Œæœ›ï¼ˆå®¶æ—â†’ã‚¹ã‚¿ãƒƒãƒ•ï¼‰===
  servingMethod: ServingMethod;        // æä¾›æ–¹æ³•ï¼ˆå¿…é ˆï¼‰
  servingMethodDetail?: string;        // æä¾›æ–¹æ³•è©³ç´°
  preferredServingSchedule?: string;   // æä¾›å¸Œæœ›ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆä¾‹: "æ¯æ—¥1å€‹ãšã¤"ï¼‰
  plannedServeDate?: string;           // æä¾›äºˆå®šæ—¥
  noteToStaff?: string;                // ã‚¹ã‚¿ãƒƒãƒ•ã¸ã®ç”³ã—é€ã‚Š

  // === ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ===
  status: ItemStatus;                  // pending | in_progress | consumed | expired | discarded

  // === é›†è¨ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç”¨ï¼‰===
  consumptionSummary: {
    totalServed: number;               // ç´¯è¨ˆæä¾›å›æ•°
    totalServedQuantity: number;       // ç´¯è¨ˆæä¾›é‡
    totalConsumedQuantity: number;     // ç´¯è¨ˆæ¶ˆè²»é‡
    avgConsumptionRate: number;        // å¹³å‡æ‘‚é£Ÿç‡
    lastServedDate?: string;           // æœ€çµ‚æä¾›æ—¥
    lastServedBy?: string;             // æœ€çµ‚æä¾›è€…
  };

  // === ãƒ¡ã‚¿æƒ…å ± ===
  createdAt: Timestamp;
  updatedAt: Timestamp;
}

// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å®šç¾©ï¼ˆæ‹¡å¼µï¼‰
type ItemStatus =
  | 'pending'      // æœªæä¾›ï¼ˆç™»éŒ²æ¸ˆã¿ã€ã¾ã ä¸€åº¦ã‚‚æä¾›ã—ã¦ã„ãªã„ï¼‰
  | 'in_progress'  // æä¾›ä¸­ï¼ˆä¸€éƒ¨æä¾›æ¸ˆã¿ã€æ®‹é‡ã‚ã‚Šï¼‰â˜…æ–°è¦è¿½åŠ 
  | 'consumed'     // æ¶ˆè²»å®Œäº†ï¼ˆæ®‹é‡ã‚¼ãƒ­ï¼‰
  | 'expired'      // æœŸé™åˆ‡ã‚Œ
  | 'discarded';   // å»ƒæ£„
```

### 2.4 ConsumptionLogï¼ˆæ¶ˆè²»ãƒ­ã‚°ï¼‰- æ–°è¦

ã‚¹ã‚¿ãƒƒãƒ•ãŒè¨˜éŒ²ã™ã‚‹æä¾›ãƒ»æ‘‚é£Ÿã®å±¥æ­´ã€‚å“ç‰©ã”ã¨ã«ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨ã—ã¦ç®¡ç†ã€‚

```typescript
// Firestore: care_items/{itemId}/consumption_logs/{logId}
interface ConsumptionLog {
  // === è­˜åˆ¥æƒ…å ± ===
  id: string;                          // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆIDï¼ˆUUIDï¼‰
  itemId: string;                      // è¦ªã®å“ç‰©ID

  // === æä¾›æƒ…å ± ===
  servedDate: string;                  // æä¾›æ—¥ (YYYY-MM-DD)
  servedTime?: string;                 // æä¾›æ™‚åˆ» (HH:mm)ï¼ˆä»»æ„ï¼‰
  mealTime?: MealTime;                 // é£Ÿäº‹æ™‚é–“å¸¯ï¼ˆæœé£Ÿ/æ˜¼é£Ÿ/å¤•é£Ÿ/é–“é£Ÿï¼‰
  servedQuantity: number;              // æä¾›æ•°é‡ï¼ˆä¾‹: 1ï¼‰
  servedBy: string;                    // æä¾›ã‚¹ã‚¿ãƒƒãƒ•å

  // === æ‘‚é£Ÿæƒ…å ± ===
  consumedQuantity: number;            // å®Ÿéš›ã«é£Ÿã¹ãŸé‡ï¼ˆä¾‹: 0.5ï¼‰
  consumptionRate: number;             // æ‘‚é£Ÿç‡ï¼ˆ0-100%ï¼‰
  consumptionStatus: ConsumptionStatus; // æ‘‚é£ŸçŠ¶æ³ï¼ˆfull/most/half/little/noneï¼‰

  // === æ®‹é‡æƒ…å ± ===
  quantityBefore: number;              // æä¾›å‰ã®æ®‹é‡
  quantityAfter: number;               // æä¾›å¾Œã®æ®‹é‡ï¼ˆ= quantityBefore - consumedQuantityï¼‰

  // === ç‰¹è¨˜äº‹é …ãƒ»ç”³ã—é€ã‚Š ===
  consumptionNote?: string;            // æ‘‚é£Ÿæ™‚ã®ç‰¹è¨˜äº‹é …
  noteToFamily?: string;               // å®¶æ—ã¸ã®ç”³ã—é€ã‚Š

  // === å®¶æ—æŒ‡ç¤ºå¯¾å¿œï¼ˆé–“é£Ÿè¨˜éŒ²é€£æºç”¨ï¼‰===
  followedInstruction?: boolean;       // å®¶æ—æŒ‡ç¤ºã«å¾“ã£ãŸã‹
  instructionNote?: string;            // æŒ‡ç¤ºå¯¾å¿œãƒ¡ãƒ¢
  linkedMealRecordId?: string;         // é£Ÿäº‹è¨˜éŒ²ã®æŠ•ç¨¿IDï¼ˆSheet Bã¨ã®ç´ã¥ã‘ï¼‰
  sourceType?: 'meal_form' | 'item_detail' | 'task'; // è¨˜éŒ²å…ƒ

  // === ãƒ¡ã‚¿æƒ…å ± ===
  recordedBy: string;                  // è¨˜éŒ²è€…
  recordedAt: Timestamp;               // è¨˜éŒ²æ—¥æ™‚
  updatedAt?: Timestamp;               // æ›´æ–°æ—¥æ™‚ï¼ˆä¿®æ­£æ™‚ï¼‰
  updatedBy?: string;                  // æ›´æ–°è€…ï¼ˆä¿®æ­£æ™‚ï¼‰
}

// é£Ÿäº‹æ™‚é–“å¸¯
type MealTime = 'breakfast' | 'lunch' | 'dinner' | 'snack';

const MEAL_TIMES: { value: MealTime; label: string }[] = [
  { value: 'breakfast', label: 'æœé£Ÿ' },
  { value: 'lunch', label: 'æ˜¼é£Ÿ' },
  { value: 'dinner', label: 'å¤•é£Ÿ' },
  { value: 'snack', label: 'é–“é£Ÿ' },
];
```

### 2.5 åˆ—æŒ™å‹å®šç¾©

```typescript
// ã‚«ãƒ†ã‚´ãƒªï¼ˆæ—¢å­˜ï¼‰
type ItemCategory =
  | 'fruit'       // æœç‰©
  | 'snack'       // ãŠè“å­ãƒ»é–“é£Ÿ
  | 'drink'       // é£²ã¿ç‰©
  | 'dairy'       // ä¹³è£½å“
  | 'prepared'    // èª¿ç†æ¸ˆã¿é£Ÿå“
  | 'supplement'  // æ „é¤Šè£œåŠ©é£Ÿå“
  | 'other';      // ãã®ä»–

// ä¿å­˜æ–¹æ³•ï¼ˆæ—¢å­˜ï¼‰
type StorageMethod =
  | 'room_temp'    // å¸¸æ¸©
  | 'refrigerated' // å†·è”µ
  | 'frozen';      // å†·å‡

// æä¾›æ–¹æ³•ï¼ˆæ—¢å­˜ï¼‰
type ServingMethod =
  | 'as_is'      // ãã®ã¾ã¾
  | 'cut'        // ã‚«ãƒƒãƒˆ
  | 'peeled'     // çš®ã‚€ã
  | 'heated'     // æ¸©ã‚ã‚‹
  | 'cooled'     // å†·ã‚„ã™
  | 'blended'    // ãƒŸã‚­ã‚µãƒ¼
  | 'other';     // ãã®ä»–

// æ‘‚é£ŸçŠ¶æ³ï¼ˆæ—¢å­˜ï¼‰
type ConsumptionStatus =
  | 'full'     // å®Œé£Ÿ (100%)
  | 'most'     // ã»ã¼å®Œé£Ÿ (80%ä»¥ä¸Š)
  | 'half'     // åŠåˆ†ç¨‹åº¦ (50%ç¨‹åº¦)
  | 'little'   // å°‘é‡ (30%ä»¥ä¸‹)
  | 'none';    // é£Ÿã¹ãªã‹ã£ãŸ (0%)

// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆæ‹¡å¼µï¼‰
type ItemStatus =
  | 'pending'      // æœªæä¾›
  | 'in_progress'  // æä¾›ä¸­ï¼ˆä¸€éƒ¨æ¶ˆè²»ï¼‰â˜…æ–°è¦
  | 'consumed'     // æ¶ˆè²»å®Œäº†
  | 'expired'      // æœŸé™åˆ‡ã‚Œ
  | 'discarded';   // å»ƒæ£„
```

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 3.1 å“ç‰©ç™»éŒ²ãƒ•ãƒ­ãƒ¼ï¼ˆå®¶æ—ï¼‰

```
å®¶æ—ãŒå“ç‰©ç™»éŒ²
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. CareItem ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ            â”‚
â”‚    - initialQuantity = å…¥åŠ›å€¤           â”‚
â”‚    - currentQuantity = initialQuantity  â”‚
â”‚    - status = 'pending'                 â”‚
â”‚    - consumptionSummary = åˆæœŸå€¤        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. FoodMaster æ¤œç´¢ãƒ»ç´ä»˜ã‘ï¼ˆä»»æ„ï¼‰      â”‚
â”‚    - itemName ã§é£Ÿå“ãƒã‚¹ã‚¿ã‚’æ¤œç´¢        â”‚
â”‚    - ãƒãƒƒãƒã™ã‚Œã° foodMasterId ã‚’è¨­å®š   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ã‚¿ã‚¹ã‚¯è‡ªå‹•ç”Ÿæˆï¼ˆæ—¢å­˜æ©Ÿèƒ½ï¼‰           â”‚
â”‚    - è³å‘³æœŸé™è­¦å‘Šã‚¿ã‚¹ã‚¯                 â”‚
â”‚    - æä¾›ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚¿ã‚¹ã‚¯             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ¶ˆè²»è¨˜éŒ²ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¹ã‚¿ãƒƒãƒ•ï¼‰

```
ã‚¹ã‚¿ãƒƒãƒ•ãŒæä¾›ãƒ»æ‘‚é£Ÿã‚’è¨˜éŒ²
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³                       â”‚
â”‚    - servedQuantity <= currentQuantity  â”‚
â”‚    - consumedQuantity <= servedQuantity â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ConsumptionLog ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ      â”‚
â”‚    - quantityBefore = currentQuantity   â”‚
â”‚    - quantityAfter = before - consumed  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. CareItem æ›´æ–°ï¼ˆãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ï¼‰    â”‚
â”‚    - currentQuantity = quantityAfter    â”‚
â”‚    - status = åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯              â”‚
â”‚    - consumptionSummary = å†è¨ˆç®—        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. FoodMaster çµ±è¨ˆæ›´æ–°ï¼ˆéåŒæœŸï¼‰        â”‚
â”‚    - å®šæœŸãƒãƒƒãƒã§é›†è¨ˆ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯

```typescript
function determineItemStatus(item: CareItem): ItemStatus {
  const today = new Date().toISOString().split('T')[0];

  // å»ƒæ£„æ¸ˆã¿ã¯ãã®ã¾ã¾
  if (item.status === 'discarded') {
    return 'discarded';
  }

  // æœŸé™åˆ‡ã‚Œãƒã‚§ãƒƒã‚¯
  if (item.expirationDate && item.expirationDate < today) {
    return 'expired';
  }

  // æ®‹é‡ã‚¼ãƒ­ = æ¶ˆè²»å®Œäº†
  if (item.currentQuantity <= 0) {
    return 'consumed';
  }

  // ä¸€åº¦ã§ã‚‚æä¾›ã—ã¦ã„ã‚Œã° in_progress
  if (item.consumptionSummary.totalServed > 0) {
    return 'in_progress';
  }

  // ã¾ã ä¸€åº¦ã‚‚æä¾›ã—ã¦ã„ãªã„
  return 'pending';
}
```

### 3.4 æ®‹é‡è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

```typescript
// æ¶ˆè²»ãƒ­ã‚°ã‹ã‚‰æ®‹é‡ã‚’è¨ˆç®—ï¼ˆæ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ç”¨ï¼‰
async function calculateCurrentQuantity(itemId: string): Promise<number> {
  const item = await getDoc(doc(db, 'care_items', itemId));
  const logs = await getDocs(
    collection(db, 'care_items', itemId, 'consumption_logs')
  );

  const totalConsumed = logs.docs.reduce(
    (sum, log) => sum + log.data().consumedQuantity,
    0
  );

  return item.data().initialQuantity - totalConsumed;
}

// æ¶ˆè²»è¨˜éŒ²æ™‚ã®æ®‹é‡æ›´æ–°ï¼ˆãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
async function recordConsumption(
  itemId: string,
  input: ConsumptionLogInput
): Promise<void> {
  await runTransaction(db, async (transaction) => {
    const itemRef = doc(db, 'care_items', itemId);
    const item = await transaction.get(itemRef);

    if (!item.exists()) {
      throw new Error('Item not found');
    }

    const currentQuantity = item.data().currentQuantity;

    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    if (input.servedQuantity > currentQuantity) {
      throw new Error('æä¾›æ•°é‡ãŒæ®‹é‡ã‚’è¶…ãˆã¦ã„ã¾ã™');
    }

    if (input.consumedQuantity > input.servedQuantity) {
      throw new Error('æ¶ˆè²»æ•°é‡ãŒæä¾›æ•°é‡ã‚’è¶…ãˆã¦ã„ã¾ã™');
    }

    // æ–°ã—ã„æ®‹é‡ã‚’è¨ˆç®—
    // æ³¨æ„: æ®‹ã—ãŸåˆ†ã¯å»ƒæ£„æ‰±ã„ï¼ˆæˆ»ã•ãªã„ï¼‰
    const newQuantity = currentQuantity - input.consumedQuantity;
    // ã¾ãŸã¯: æ®‹ã—ãŸåˆ†ã‚‚æ¸›ã‚‰ã™å ´åˆ
    // const newQuantity = currentQuantity - input.servedQuantity;

    // æ¶ˆè²»ãƒ­ã‚°ã‚’ä½œæˆ
    const logRef = doc(collection(db, 'care_items', itemId, 'consumption_logs'));
    transaction.set(logRef, {
      ...input,
      id: logRef.id,
      itemId,
      quantityBefore: currentQuantity,
      quantityAfter: newQuantity,
      recordedAt: serverTimestamp(),
    });

    // CareItem ã‚’æ›´æ–°
    transaction.update(itemRef, {
      currentQuantity: newQuantity,
      status: newQuantity <= 0 ? 'consumed' : 'in_progress',
      'consumptionSummary.totalServed': increment(1),
      'consumptionSummary.totalServedQuantity': increment(input.servedQuantity),
      'consumptionSummary.totalConsumedQuantity': increment(input.consumedQuantity),
      'consumptionSummary.lastServedDate': input.servedDate,
      'consumptionSummary.lastServedBy': input.servedBy,
      updatedAt: serverTimestamp(),
    });
  });
}
```

---

## 4. APIä»•æ§˜

### 4.1 æ¶ˆè²»ãƒ­ã‚°è¨˜éŒ² API

```
POST /recordConsumption
```

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
interface RecordConsumptionRequest {
  itemId: string;
  servedDate: string;              // YYYY-MM-DD
  servedTime?: string;             // HH:mm
  mealTime?: MealTime;
  servedQuantity: number;
  servedBy: string;
  consumedQuantity: number;
  consumptionStatus: ConsumptionStatus;
  consumptionNote?: string;
  noteToFamily?: string;
  recordedBy: string;
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
interface RecordConsumptionResponse {
  success: boolean;
  data?: {
    logId: string;
    itemId: string;
    currentQuantity: number;       // æ›´æ–°å¾Œã®æ®‹é‡
    status: ItemStatus;            // æ›´æ–°å¾Œã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  };
  error?: string;
}
```

**æ¨©é™**: ã‚¹ã‚¿ãƒƒãƒ•ã®ã¿

### 4.2 æ¶ˆè²»ãƒ­ã‚°ä¸€è¦§å–å¾— API

```
GET /getConsumptionLogs
```

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰**:
```typescript
interface GetConsumptionLogsRequest {
  itemId: string;                  // å¿…é ˆ
  startDate?: string;              // é–‹å§‹æ—¥
  endDate?: string;                // çµ‚äº†æ—¥
  limit?: number;                  // å–å¾—ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 50ï¼‰
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
interface GetConsumptionLogsResponse {
  success: boolean;
  data?: {
    logs: ConsumptionLog[];
    total: number;
  };
  error?: string;
}
```

**æ¨©é™**: å…¨ãƒ­ãƒ¼ãƒ«ï¼ˆé–²è¦§ã®ã¿ï¼‰

### 4.3 åœ¨åº«ã‚µãƒãƒªãƒ¼å–å¾— API

```
GET /getInventorySummary
```

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰**:
```typescript
interface GetInventorySummaryRequest {
  residentId?: string;
  status?: ItemStatus | ItemStatus[];
  includeExpiringSoon?: boolean;   // æœŸé™3æ—¥ä»¥å†…ã®ã¿
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
interface InventorySummary {
  itemId: string;
  itemName: string;
  category: ItemCategory;

  // åœ¨åº«çŠ¶æ³
  initialQuantity: number;
  currentQuantity: number;
  unit: string;
  consumedQuantity: number;
  consumptionPercentage: number;

  // æœŸé™æƒ…å ±
  expirationDate?: string;
  daysUntilExpiration?: number;
  isExpiringSoon: boolean;
  isExpired: boolean;

  // æ‘‚é£Ÿå‚¾å‘
  avgConsumptionRate: number;
  totalServings: number;

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status: ItemStatus;

  // æœ€æ–°ã®ç”³ã—é€ã‚Š
  latestNoteToFamily?: string;
  latestNoteDate?: string;
}

interface GetInventorySummaryResponse {
  success: boolean;
  data?: {
    items: InventorySummary[];
    totals: {
      totalItems: number;
      pendingCount: number;
      inProgressCount: number;
      consumedCount: number;
      expiredCount: number;
      expiringSoonCount: number;
    };
  };
  error?: string;
}
```

### 4.4 é£Ÿå“çµ±è¨ˆå–å¾— API

```
GET /getFoodStats
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
interface FoodStatsResponse {
  success: boolean;
  data?: {
    // é£Ÿå“åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°
    mostPreferred: {
      foodName: string;
      avgConsumptionRate: number;
      totalServings: number;
    }[];

    leastPreferred: {
      foodName: string;
      avgConsumptionRate: number;
      wastedQuantity: number;
    }[];

    // ã‚«ãƒ†ã‚´ãƒªåˆ¥å‚¾å‘
    categoryStats: {
      category: ItemCategory;
      avgConsumptionRate: number;
      totalItems: number;
    }[];
  };
  error?: string;
}
```

---

## 5. UIè¨­è¨ˆ

### 5.1 æ¶ˆè²»è¨˜éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆã‚¹ã‚¿ãƒƒãƒ•ç”¨ï¼‰- æ‹¡å¼µç‰ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æä¾›ãƒ»æ‘‚é£Ÿã‚’è¨˜éŒ²                     [Ã—]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ å“ç‰©: ãƒãƒŠãƒŠ                                â”‚
â”‚ æ®‹é‡: 3.5æˆ¿ / 4æˆ¿                           â”‚
â”‚                                             â”‚
â”‚ â”€â”€ æä¾›æƒ…å ± â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                             â”‚
â”‚ æä¾›æ—¥ *              æ™‚é–“å¸¯                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ 2025/12/17   â”‚    â”‚ â–¼ é–“é£Ÿ         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚ æä¾›æ•°é‡ *                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚ â”‚  1    â”‚ æˆ¿  ï¼ˆæ®‹ã‚Š 3.5æˆ¿ ã‹ã‚‰ï¼‰          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                             â”‚
â”‚ â”€â”€ æ‘‚é£Ÿæƒ…å ± â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                             â”‚
â”‚ å®Ÿéš›ã«é£Ÿã¹ãŸé‡                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚ â”‚  0.5  â”‚ æˆ¿  ï¼ˆæä¾›ã—ãŸ 1æˆ¿ ã®ã†ã¡ï¼‰      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚ â€» æ®‹ã‚Š0.5æˆ¿ã¯å»ƒæ£„æ‰±ã„ã«ãªã‚Šã¾ã™            â”‚
â”‚                                             â”‚
â”‚ æ‘‚é£ŸçŠ¶æ³                                    â”‚
â”‚ â—‹ å®Œé£Ÿ (100%)                              â”‚
â”‚ â— åŠåˆ†ç¨‹åº¦ (50%)  â† è‡ªå‹•é¸æŠ               â”‚
â”‚ â—‹ å°‘é‡ (30%ä»¥ä¸‹)                           â”‚
â”‚ â—‹ é£Ÿã¹ãªã‹ã£ãŸ                              â”‚
â”‚                                             â”‚
â”‚ ç‰¹è¨˜äº‹é …                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ çš®ãŒç¡¬ã‹ã£ãŸã‚ˆã†ã§ã™                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚ ã”å®¶æ—ã¸ã®ç”³ã—é€ã‚Š                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ åŠåˆ†å¬ã—ä¸ŠãŒã‚Šã¾ã—ãŸã€‚æ¬¡å›ã¯æŸ”ã‚‰ã‹ã‚ã®  â”‚ â”‚
â”‚ â”‚ ãƒãƒŠãƒŠã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚      [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]    [è¨˜éŒ²ã™ã‚‹]             â”‚
â”‚                                             â”‚
â”‚ è¨˜éŒ²å¾Œã®æ®‹é‡: 3.0æˆ¿                         â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å“ç‰©ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆå…±æœ‰ãƒ“ãƒ¥ãƒ¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† ãƒãƒŠãƒŠ                         [ç·¨é›†]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ â”Œâ”€ åœ¨åº«çŠ¶æ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  2.5æˆ¿ / 4æˆ¿ (37.5%)   â”‚ â”‚
â”‚ â”‚ å¹³å‡æ‘‚é£Ÿç‡: 75%                          â”‚ â”‚
â”‚ â”‚ è³å‘³æœŸé™: 12/20 (ã‚ã¨3æ—¥)                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚ â”€â”€ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                             â”‚
â”‚ ğŸ“¦ 12/16 10:30                             â”‚
â”‚    å®¶æ—ãŒç™»éŒ²                               â”‚
â”‚    ã€ŒãƒãƒŠãƒŠ4æˆ¿ã‚’é€ã‚Šã¾ã—ãŸã€                â”‚
â”‚    ã‚¹ã‚¿ãƒƒãƒ•ã¸: æ¯æ—¥1æˆ¿ãšã¤æä¾›ã—ã¦ãã ã•ã„  â”‚
â”‚                                             â”‚
â”‚ ğŸ½ï¸ 12/17 15:00 ã€é–“é£Ÿã€‘                    â”‚
â”‚    å±±ç”°ã•ã‚“ãŒæä¾›: 1æˆ¿                      â”‚
â”‚    æ‘‚é£Ÿ: 0.5æˆ¿ (50%)                        â”‚
â”‚    â†’ æ®‹ã‚Š 3.5æˆ¿                             â”‚
â”‚    å®¶æ—ã¸: åŠåˆ†å¬ã—ä¸ŠãŒã‚Šã¾ã—ãŸ             â”‚
â”‚                                             â”‚
â”‚ ğŸ½ï¸ 12/18 15:00 ã€é–“é£Ÿã€‘                    â”‚
â”‚    ä½è—¤ã•ã‚“ãŒæä¾›: 1æˆ¿                      â”‚
â”‚    æ‘‚é£Ÿ: 1æˆ¿ (100%) å®Œé£Ÿï¼                  â”‚
â”‚    â†’ æ®‹ã‚Š 2.5æˆ¿                             â”‚
â”‚    å®¶æ—ã¸: ä»Šæ—¥ã¯å®Œé£Ÿã•ã‚Œã¾ã—ãŸï¼           â”‚
â”‚                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ã€ã‚¹ã‚¿ãƒƒãƒ•ç”¨ã€‘                              â”‚
â”‚        [æä¾›ãƒ»æ‘‚é£Ÿã‚’è¨˜éŒ²ã™ã‚‹]               â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 åœ¨åº«ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ï¼ˆå®¶æ—ãƒ›ãƒ¼ãƒ ç”¨ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ é€ã£ãŸå“ç‰©                    [ã‚‚ã£ã¨è¦‹ã‚‹] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸŒ ãƒãƒŠãƒŠ              æä¾›ä¸­ ğŸ”µ        â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  2.5/4æˆ¿  æœŸé™:12/20       â”‚ â”‚
â”‚ â”‚ ã€ŒåŠåˆ†å¬ã—ä¸ŠãŒã‚Šã¾ã—ãŸã€                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸŠ ã¿ã‹ã‚“              æœªæä¾› ğŸŸ¡        â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  5/5å€‹    æœŸé™:12/22       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ® ãƒ—ãƒªãƒ³              æ¶ˆè²»æ¸ˆ ğŸŸ¢        â”‚ â”‚
â”‚ â”‚                        æ‘‚é£Ÿç‡:100%      â”‚ â”‚
â”‚ â”‚ ã€ŒãŠã„ã—ãã†ã«å¬ã—ä¸ŠãŒã£ã¦ã„ã¾ã—ãŸã€    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### 6.1 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

```
functions/src/
â”œâ”€â”€ functions/
â”‚   â”œâ”€â”€ careItems.ts              # å“ç‰©CRUD APIï¼ˆæ—¢å­˜ã€æ‹¡å¼µï¼‰
â”‚   â”œâ”€â”€ consumptionLogs.ts        # æ¶ˆè²»ãƒ­ã‚°APIï¼ˆæ–°è¦ï¼‰
â”‚   â””â”€â”€ foodMasters.ts            # é£Ÿå“ãƒã‚¹ã‚¿APIï¼ˆæ–°è¦ã€å°†æ¥ï¼‰
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ careItem.ts               # å‹å®šç¾©ï¼ˆæ‹¡å¼µï¼‰
â”‚   â”œâ”€â”€ consumptionLog.ts         # æ¶ˆè²»ãƒ­ã‚°å‹å®šç¾©ï¼ˆæ–°è¦ï¼‰
â”‚   â””â”€â”€ foodMaster.ts             # é£Ÿå“ãƒã‚¹ã‚¿å‹å®šç¾©ï¼ˆæ–°è¦ï¼‰
â””â”€â”€ services/
    â”œâ”€â”€ inventoryService.ts       # åœ¨åº«è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ–°è¦ï¼‰
    â””â”€â”€ statsService.ts           # çµ±è¨ˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ‹¡å¼µï¼‰
```

### 6.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```
frontend/src/
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ careItem.ts               # å‹å®šç¾©ï¼ˆæ‹¡å¼µï¼‰
â”‚   â””â”€â”€ consumptionLog.ts         # æ¶ˆè²»ãƒ­ã‚°å‹å®šç¾©ï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ family/
â”‚   â”‚   â””â”€â”€ ItemTimeline.tsx      # å“ç‰©ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆæ–°è¦ï¼‰
â”‚   â””â”€â”€ staff/
â”‚       â””â”€â”€ FamilyMessageDetail.tsx # é€£çµ¡è©³ç´°+æ¶ˆè²»è¨˜éŒ²ï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”œâ”€â”€ InventoryBar.tsx      # åœ¨åº«ãƒãƒ¼ï¼ˆæ–°è¦ï¼‰
â”‚   â”‚   â””â”€â”€ TimelineView.tsx      # ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºï¼ˆæ–°è¦ï¼‰
â”‚   â””â”€â”€ staff/
â”‚       â””â”€â”€ ConsumptionRecordModal.tsx # æ¶ˆè²»è¨˜éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆæ‹¡å¼µï¼‰
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useConsumptionLogs.ts     # æ¶ˆè²»ãƒ­ã‚°å–å¾—ï¼ˆæ–°è¦ï¼‰
â”‚   â””â”€â”€ useInventorySummary.ts    # åœ¨åº«ã‚µãƒãƒªãƒ¼å–å¾—ï¼ˆæ–°è¦ï¼‰
â””â”€â”€ api/
    â””â”€â”€ consumptionLogs.ts        # APIå‘¼ã³å‡ºã—é–¢æ•°ï¼ˆæ–°è¦ï¼‰
```

---

## 7. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨ˆç”»

### 7.1 æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®ç§»è¡Œ

æ—¢å­˜ã® `CareItem` ãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ç§»è¡Œã—ã¾ã™ï¼š

```typescript
// ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
async function migrateCareItems() {
  const items = await getDocs(collection(db, 'care_items'));

  for (const doc of items.docs) {
    const item = doc.data();

    // æ–°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 
    await updateDoc(doc.ref, {
      // initialQuantity ãŒãªã‘ã‚Œã° quantity ã‚’ä½¿ç”¨
      initialQuantity: item.initialQuantity ?? item.quantity ?? 1,
      // currentQuantity ãŒãªã‘ã‚Œã° remainingQuantity ã‚’ä½¿ç”¨
      currentQuantity: item.currentQuantity ?? item.remainingQuantity ?? item.quantity ?? 1,
      // consumptionSummary ã‚’åˆæœŸåŒ–
      consumptionSummary: item.consumptionSummary ?? {
        totalServed: item.actualServeDate ? 1 : 0,
        totalServedQuantity: item.servedQuantity ?? 0,
        totalConsumedQuantity: item.consumptionRate
          ? (item.servedQuantity ?? 0) * (item.consumptionRate / 100)
          : 0,
        avgConsumptionRate: item.consumptionRate ?? 0,
        lastServedDate: item.actualServeDate,
        lastServedBy: item.servedBy,
      },
    });

    // æ—¢å­˜ã®æ‘‚é£Ÿè¨˜éŒ²ãŒã‚ã‚Œã° ConsumptionLog ã¨ã—ã¦ç§»è¡Œ
    if (item.actualServeDate && item.servedQuantity) {
      const logRef = doc(collection(db, 'care_items', doc.id, 'consumption_logs'));
      await setDoc(logRef, {
        id: logRef.id,
        itemId: doc.id,
        servedDate: item.actualServeDate,
        servedQuantity: item.servedQuantity,
        servedBy: item.servedBy ?? 'unknown',
        consumedQuantity: item.consumptionRate
          ? item.servedQuantity * (item.consumptionRate / 100)
          : item.servedQuantity,
        consumptionRate: item.consumptionRate ?? 100,
        consumptionStatus: item.consumptionStatus ?? 'full',
        quantityBefore: item.quantity ?? 1,
        quantityAfter: item.remainingQuantity ?? 0,
        consumptionNote: item.consumptionNote,
        noteToFamily: item.noteToFamily,
        recordedBy: item.recordedBy ?? 'unknown',
        recordedAt: item.updatedAt ?? serverTimestamp(),
      });
    }
  }
}
```

### 7.2 å¾Œæ–¹äº’æ›æ€§

- æ—¢å­˜ã®APIã¯ç¶­æŒã—ã€æ–°APIã‚’è¿½åŠ 
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯æ®µéšçš„ã«æ–°UIã«ç§»è¡Œ
- æ—§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ`quantity`, `remainingQuantity`ï¼‰ã¯èª­ã¿å–ã‚Šå°‚ç”¨ã§æ®‹ã™

---

## 8. å‚ç…§è³‡æ–™

- [ITEM_MANAGEMENT_SPEC.md](./ITEM_MANAGEMENT_SPEC.md) - å“ç‰©ç®¡ç†è©³ç´°è¨­è¨ˆ
- [SNACK_RECORD_INTEGRATION_SPEC.md](./SNACK_RECORD_INTEGRATION_SPEC.md) - é–“é£Ÿè¨˜éŒ²é€£æºè¨­è¨ˆï¼ˆé£Ÿäº‹è¨˜éŒ²ã‹ã‚‰ã®æ¶ˆè²»ãƒ­ã‚°é€£æºï¼‰
- [VIEW_ARCHITECTURE_SPEC.md](./VIEW_ARCHITECTURE_SPEC.md) - ãƒ“ãƒ¥ãƒ¼æ§‹æˆè¨­è¨ˆ
- [USER_ROLE_SPEC.md](./USER_ROLE_SPEC.md) - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«ãƒ»æ¨©é™è¨­è¨ˆ
- [STATS_DASHBOARD_SPEC.md](./STATS_DASHBOARD_SPEC.md) - çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­è¨ˆ
